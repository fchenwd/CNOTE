# 区间DP

## 定义

区间类动态规划是线性动态规划的扩展，它在分阶段地划分问题时，与阶段中元素出现的顺序和由前一阶段的哪些元素合并而来有很大的关系。

令状态 $f(i, j)$ 表示将下标位置 $i$ 到 $j$ 的所有元素合并能获得的价值的最大值，那么 $f(i, j)=\max\{f(i, k)+f(k+1, j)+cost\}$，$cost$ 为将这两组元素合并起来的价值。

_感觉在原理上来说跟 Floyd 很像_

## 性质

区间 DP 有以下特点：

 **合并** ：即将两个或多个部分进行整合，当然也可以反过来；

 **特征** ：能将问题分解为能两两合并的形式；

 **求解** ：对整个问题设最优值，枚举合并点，将问题分解为左右两个部分，最后合并两个部分的最优值得到原问题的最优值。

 **时间复杂度** ：通常为 $O(n^3)$

<br>

#### 有环怎么办？
直接扩展数组 $* 2$ ，然后求 $dp[L][R], (R - L - 1 = n)$ 就行。


## 实现

```cpp
for (int len = 2; len <= n; len++)
    for (int i = 1; i <= n + 1 - len; i++) {
        int j = len + i - 1;
        for (int k = i; k < j; k++)
            f[i][j] = max(f[i][j], f[i][k] + f[k + 1][j] + /* 两区间合并的贡献 */);
}
```
